Week 3. Tutorial | Demultiplexing

1. Load the class node:
```
sinteractive --reservation=aneq505 --time=01:00:00 --partition=amilan --nodes=1 --ntasks=6 --qos=normal
```

2. Let's navigate to the correct place. Use `cd` to move into your **decomp****_tutorial** folder. Use `pwd` to make sure you're in the correct place.
```
`cd /scratch/alpine/$USER/decomp_tutorial`   
pwd
```

3. Create directories for the different analyses so you can keep your files organized:
```
mkdir slurm
mkdir taxonomy
mkdir tree
mkdir taxaplots
mkdir dada2
mkdir demux
mkdir core_metrics
```

4. Create a directory for the manifest and import the manifest files (we made them for you): 
In your study you would need to construct the manifest file yourself, move out of the directory, and copy the demultiplex reads into analysis directory. 
```
mkdir manifest
cd manifest

cp/pl/active/courses/2025_summer/CSU_2025/q2_workshop_final/QIIME2/manifest_run2.txt .

cp/pl/active/courses/2025_summer/CSU_2025/q2_workshop_final/QIIME2/manifest_run3.txt .

cd ../

cp -r /pl/active/courses/2025_summer/CSU_2025/q2_workshop_final/QIIME2/reads_run2 .

cp -r /pl/active/courses/2025_summer/CSU_2025/q2_workshop_final/QIIME2/reads_run3 .

cd reads_run2

ls

cs ../

```

5. Import data into QIIME2
```
# run the import command to generate a qiime2 readable artifact for the reads, save the demux results in the demux folder.  
  
#import run 2  
qiime tools import \  
--type "SampleData[PairedEndSequencesWithQuality]" \  
--input-format PairedEndFastqManifestPhred33V2 \  
--input-path manifest/manifest_run2.txt \  
--output-path demux/demux_run2.qza  
  
#import run 3  
qiime tools import \  
--type "SampleData[PairedEndSequencesWithQuality]" \  
--input-format PairedEndFastqManifestPhred33V2 \  
--input-path manifest/manifest_run3.txt \  
--output-path demux/demux_run3.qza

```

6. Check data quality
```
# generate a demux visualization file  
  
cd demux  
  
#run2  
qiime demux summarize \  
--i-data demux_run2.qza \  
--o-visualization demux_run2.qzv  
  
#run3  
qiime demux summarize \  
--i-data demux_run3.qza \  
--o-visualization demux_run3.qzv
```
